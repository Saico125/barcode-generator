<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Barcode & QR Generator</title>
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap">
  <style>
    :root {
      --bg: #0b0c10;
      --panel: #111318;
      --muted: #9aa4af;
      --text: #e6e9ef;
      --accent: #4f46e5;
    }
    [data-theme="light"] {
      --bg: #f9fafb;
      --panel: #ffffff;
      --muted: #4b5563;
      --text: #111827;
      --accent: #4f46e5;
    }
    * {box-sizing: border-box; transition: background 0.3s, color 0.3s;}
    html, body {height: 100%; margin: 0;}
    body {
      font-family: 'Inter', sans-serif;
      background: var(--bg);
      color: var(--text);
      display: flex;
      justify-content: center;
      align-items: flex-start;
      padding: 32px;
    }
    .container {max-width: 880px; width: 100%; position: relative;}
    h1 {font-size: 28px; margin: 0 0 8px; font-weight: 600;}
    p.desc {color: var(--muted); margin: 0 0 24px;}
    .card {background: var(--panel); border: 1px solid rgba(0,0,0,0.06); border-radius: 16px; padding: 24px; margin-bottom: 24px;}
    label {display: block; margin: 12px 0 6px; font-weight: 600;}
    input, select {width: 100%; padding: 10px 12px; border-radius: 12px; border: 1px solid rgba(0,0,0,0.15); background: var(--bg); color: var(--text); font-size: 14px;}
    .row {display: grid; grid-template-columns: 1fr 1fr; gap: 16px;}
    .row-3 {display: grid; grid-template-columns: repeat(3, 1fr); gap: 16px;}
    .inline {display: flex; gap: 12px; align-items: center;}
    .btn {padding: 12px 18px; border-radius: 12px; font-weight: 600; border: none; cursor: pointer; transition: background 0.3s;}
    .btn-primary {background: var(--accent); color: #fff;}
    .btn-ghost {background: transparent; color: var(--text); border: 1px solid rgba(0,0,0,0.2); text-decoration: none; text-align: center;}
    .preview {background: var(--bg); border: 1px dashed rgba(0,0,0,0.2); border-radius: 12px; padding: 16px; display: flex; justify-content: center; align-items: center; min-height: 260px;}
    .downloads {display: flex; gap: 12px; justify-content: flex-end; margin-top: 16px;}
    .error {color: #f87171; font-weight: 600; margin-top: 8px;}
    footer {margin-top: 12px; color: var(--muted); font-size: 12px;}
    #themeToggle {position: absolute; top: 0; right: 0; background: transparent; border: none; cursor: pointer; font-size: 22px; padding: 8px;}
  </style>
</head>
<body>
  <div class="container">
    <button id="themeToggle">üåô</button>
    <h1>Barcode & QR Generator</h1>
    <p class="desc">‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏ö‡∏≤‡∏£‡πå‡πÇ‡∏Ñ‡πâ‡∏î‡∏´‡∏£‡∏∑‡∏≠ QR code ‡πÑ‡∏î‡πâ‡∏á‡πà‡∏≤‡∏¢ ‡πÜ ‡πÄ‡∏û‡∏µ‡∏¢‡∏á‡∏Å‡∏£‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÅ‡∏•‡∏∞‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó</p>

    <div class="card">
      <label for="text">‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏´‡∏£‡∏∑‡∏≠‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏Ç:</label>
      <input id="text" type="text" value="123456789012" />

      <div class="row">
        <div>
          <label for="format">‡∏£‡∏π‡∏õ‡πÅ‡∏ö‡∏ö:</label>
          <select id="format">
            <option value="CODE128">CODE128</option>
            <option value="CODE39">CODE39</option>
            <option value="EAN13">EAN13</option>
            <option value="EAN8">EAN8</option>
            <option value="UPC">UPC</option>
            <option value="ITF14">ITF14</option>
            <option value="MSI">MSI</option>
            <option value="pharmacode">Pharmacode</option>
            <option value="QR">QR Code</option>
          </select>
        </div>
        <div>
          <label for="height">‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏π‡∏á (px):</label>
          <input id="height" type="number" value="120" min="20" max="400" />
        </div>
      </div>

      <div class="row-3">
        <div>
          <label for="width">‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Å‡∏ß‡πâ‡∏≤‡∏á‡∏Ç‡∏≠‡∏á‡πÅ‡∏ñ‡∏ö:</label>
          <select id="width">
            <option value="1">‡∏ö‡∏≤‡∏á</option>
            <option value="2" selected>‡∏õ‡∏Å‡∏ï‡∏¥</option>
            <option value="3">‡∏´‡∏ô‡∏≤</option>
            <option value="4">‡∏´‡∏ô‡∏≤‡∏°‡∏≤‡∏Å</option>
          </select>
        </div>
        <div>
          <label>‡πÅ‡∏™‡∏î‡∏á‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°:</label>
          <div class="inline">
            <label><input type="radio" name="display" value="1" checked /> ‡πÅ‡∏™‡∏î‡∏á</label>
            <label><input type="radio" name="display" value="0" /> ‡πÑ‡∏°‡πà‡πÅ‡∏™‡∏î‡∏á</label>
          </div>
        </div>
        <div style="align-self: end; justify-self: end;">
          <button class="btn btn-primary" id="generate">‡∏™‡∏£‡πâ‡∏≤‡∏á</button>
        </div>
      </div>
      <div id="error" class="error"></div>
    </div>

    <h3>‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå:</h3>
    <div class="card">
      <div class="preview">
        <svg id="barcode-svg"></svg>
        <canvas id="barcode-canvas" style="display:none"></canvas>
        <div id="qrcode"></div>
      </div>
      <div class="downloads">
        <a id="downloadPNG" class="btn btn-ghost" download="code.png">‡∏î‡∏≤‡∏ß‡∏ô‡πå‡πÇ‡∏´‡∏•‡∏î PNG</a>
        <a id="downloadSVG" class="btn btn-ghost" download="code.svg">‡∏î‡∏≤‡∏ß‡∏ô‡πå‡πÇ‡∏´‡∏•‡∏î SVG</a>
      </div>
    </div>

    <footer>‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏∞‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á‡∏Ç‡∏≠‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÅ‡∏•‡∏∞‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡πÄ‡∏•‡∏Ç‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö EAN/UPC/ITF-14</footer>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/jsbarcode@3.11.6/dist/JsBarcode.all.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/qrcode/build/qrcode.min.js"></script>
  <script>
    const $ = (s)=>document.querySelector(s);
    const themeBtn = $('#themeToggle');
    let dark = true;
    themeBtn.addEventListener('click', ()=>{
      dark = !dark;
      if(dark){
        document.body.dataset.theme = "dark";
        themeBtn.textContent = 'üåô';
      } else {
        document.body.dataset.theme = "light";
        themeBtn.textContent = '‚òÄÔ∏è';
      }
      generate();
    });

    function validateInput(format, text){
      if(format === 'EAN13' && !/^\d{12,13}$/.test(text)) return 'EAN13 ‡∏ï‡πâ‡∏≠‡∏á‡∏°‡∏µ‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏Ç 12 ‡∏´‡∏£‡∏∑‡∏≠ 13 ‡∏´‡∏•‡∏±‡∏Å';
      if(format === 'EAN8' && !/^\d{7,8}$/.test(text)) return 'EAN8 ‡∏ï‡πâ‡∏≠‡∏á‡∏°‡∏µ‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏Ç 7 ‡∏´‡∏£‡∏∑‡∏≠ 8 ‡∏´‡∏•‡∏±‡∏Å';
      if(format === 'UPC' && !/^\d{11,12}$/.test(text)) return 'UPC ‡∏ï‡πâ‡∏≠‡∏á‡∏°‡∏µ‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏Ç 11 ‡∏´‡∏£‡∏∑‡∏≠ 12 ‡∏´‡∏•‡∏±‡∏Å';
      if(format === 'ITF14' && !/^\d{13,14}$/.test(text)) return 'ITF14 ‡∏ï‡πâ‡∏≠‡∏á‡∏°‡∏µ‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏Ç 13 ‡∏´‡∏£‡∏∑‡∏≠ 14 ‡∏´‡∏•‡∏±‡∏Å';
      return '';
    }

    function generate(){
      const text = $('#text').value.trim();
      const format = $('#format').value;
      const width = parseInt($('#width').value,10) || 2;
      const height = parseInt($('#height').value,10) || 120;
      const displayValue = document.querySelector('input[name="display"]:checked').value==='1';

      if(!text){
        $('#error').textContent = '‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÉ‡∏™‡πà‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏´‡∏£‡∏∑‡∏≠‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏Ç';
        return;
      }
      const errMsg = validateInput(format, text);
      if(errMsg){
        $('#error').textContent = errMsg;
        return;
      }
      $('#error').textContent = '';

      $('#barcode-svg').innerHTML = '';
      $('#qrcode').innerHTML = '';
      $('#barcode-canvas').style.display='none';

      if(format === 'QR'){
        QRCode.toCanvas($('#barcode-canvas'), text, {width: height, color:{dark:'#000', light:'#fff'}}, function (error) {
          if (error) console.error(error);
          $('#barcode-canvas').style.display='block';
          $('#downloadPNG').href = $('#barcode-canvas').toDataURL('image/png');
          $('#downloadSVG').removeAttribute('href');
        });
      } else {
        JsBarcode('#barcode-svg', text, {format,width,height,displayValue,lineColor:'#000',background:'#fff',margin:16});
        const canvas = $('#barcode-canvas');
        JsBarcode(canvas, text, {format,width,height,displayValue,lineColor:'#000',background:'#fff',margin:16});
        $('#downloadPNG').href = canvas.toDataURL('image/png');
        const svgEl = $('#barcode-svg');
        const serializer = new XMLSerializer();
        let svgStr = serializer.serializeToString(svgEl);
        if(!svgStr.includes('xmlns')) svgStr = svgStr.replace('<svg','<svg xmlns="http://www.w3.org/2000/svg"');
        const svgBlob = new Blob([svgStr], {type: 'image/svg+xml'});
        $('#downloadSVG').href = URL.createObjectURL(svgBlob);
      }
    }

    $('#generate').addEventListener('click', generate);
    window.onload = generate;
  </script>
</body>
</html>
